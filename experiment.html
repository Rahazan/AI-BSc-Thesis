<head>

  <style>

  html, body {
    margin: 0;
    height: 100%;
    background-color: black;
    color: white;
  }

  #content {
    width: 420px;
    display:block;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-right: -50%;
    transform: translate(-50%, -50%)
  }

  p{
    font-size: 5em;
      text-align center;
      vertical-align: middle;
      border: dashed 1px #111;
  }

  a{
    color:green;
  }

  </style>
  <script src="seedrandom.min.js"></script>
</head>
<body>
  <div id="content">
      <p>133</p>
      <p>689</p>
  </div>


  <script>
    var tasks = [
    {
      difficulty:1,
      answers:[3, 1, 2],
      sumparts:[1,0,1,1]
    },
    {
      difficulty:1,
      answers:[4, 3, 1],
      sumparts:[1,0,1,1]
    },
    {
      difficulty:2,
      answers:[21, 19, 17],
      sumparts:[4,3,5,9]
    },
    {
      difficulty:2,
      answers:[23, 22, 20],
      sumparts:[8,9,4,1]
    },
    {
      difficulty:3,
      answers:[203, 196, 199],
      sumparts:[71,48,34,50]
    },
    {
      difficulty:3,
      answers:[214, 222, 236],
      sumparts:[95,19,80,28]
    },
    {
      difficulty:4,
      answers:[1836, 1866, 1844],
      sumparts:[252,438,270,872]
    },
    {
      difficulty:4,
      answers:[1659, 1662, 1708],
      sumparts:[443,452,642,171]
    }


    ]; //2 of each difficulty.




    tasks = shuffle(tasks);
    var currentTask ;

    var timeBetweenActions = 4000;


    //Show order of tasks, for researcher.
    //alert(tasks);

    var elem = document.querySelector("#content");

    Math.seedrandom("sumseed");

    nextTrial();

    function showText(number){
      elem.innerHTML = "<p>" + number + "</p>";
    }

    function showAnswers(){
      elem.innerHTML = "";

      for(var i = 0; i < currentTask.answers.length; i++)
      {
        elem.innerHTML += "<p><a href=\"#\" onclick=\"nextTrial();\">" + currentTask.answers[i] + "</a></p>";
      }
    }

    function nextTrial()
    {
      if (0 !== tasks.length) { //Get next task
          currentTask =  tasks.shift();
          showText(Array(currentTask.difficulty).join("*")); //Show difficulty
          sleep(timeBetweenActions*3, runTrial); //Start after a while
        }
      else {
          showNumber(elem, "Klaar!");
        }
    }

    function runTrial()
    {
      if (currentTask.sumparts.length < 1) {
          answerPart();
          return;
      }
        showText(currentTask.sumparts.shift());
        sleep(timeBetweenActions, runTrial);
    }

    function answerPart()
    {
      showAnswers(currentTask.answers);
      //Wait for user to click one of the options..
    }

    function sleep(millis, callback) {
      setTimeout(function()
            { callback(); }
      , millis);
    }

    function shuffle(array) { //Fisher-Yates shuffle, source https://github.com/coolaj86/knuth-shuffle
      var currentIndex = array.length, temporaryValue, randomIndex ;

      // While there remain elements to shuffle...
      while (0 !== currentIndex) {

        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }

      return array;
    }
  </script>


</body>
